{% from "components/icon.html" import Icon %}
{% from "components/tooltip.html" import Tooltip %}

{% macro Link(icon, text, url, active=False) %}
  <a class='icon-link {{ "active icon-link--disabled" if active }}' href='{{ url }}'>
    <div class='col'>
      <div class='icon-link--icon'>{{ Icon(icon) }}</div>
      <div class='icon-link--name'>{{ text }}</div>
    </div>
  </a>
{% endmacro %}

<div class='portfolio-header row'>
  <div class='col col--grow'>
    <div class='portfolio-header__name'>
      {{ secondary_breadcrumb or portfolio.name }}
    </div>
    <div class='row'>
      <div class='column-left'></div>
        <div class='column-right portfolio-funding__header--funded-through {{ "funded" if funding_end_date is not none and funded else "unfunded"}}'>

        </div>
      </div>
  </div>
  <div class='row links'>
    {{ Link(
      icon='funding',
      text='navigation.portfolio_navigation.breadcrumbs.funding' | translate,
      url=url_for("task_orders.portfolio_funding", portfolio_id=portfolio.id),
      active=request.url_rule.endpoint == "task_orders.portfolio_funding",
    ) }}
    {{ Link(
      icon='applications',
      text='navigation.portfolio_navigation.breadcrumbs.applications' | translate,
      url=url_for("applications.portfolio_applications", portfolio_id=portfolio.id),
      active=request.url_rule.endpoint == "applications.portfolio_applications",
    ) }}
    {% if user_can(permissions.VIEW_PORTFOLIO_REPORTS) %}
      {{ Link(
        icon='chart-pie',
        text='navigation.portfolio_navigation.breadcrumbs.reports' | translate,
        url=url_for("portfolios.reports", portfolio_id=portfolio.id),
        active=request.url_rule.endpoint == "portfolios.reports",
      ) }}
    {% endif %}
    {% if user_can(permissions.VIEW_PORTFOLIO_ADMIN) %}
      {{ Link(
        icon='cog',
        text='navigation.portfolio_navigation.breadcrumbs.admin' | translate,
        url=url_for("portfolios.admin", portfolio_id=portfolio.id),
        active=request.url_rule.endpoint == "portfolios.admin",
      ) }}
    {% endif %}
  </div>
</div>
