{% macro RequiredLabel() -%}
  <span class='label label--error'>Response Required</span>
{%- endmacro %}

{% extends 'requests_new.html' %}

{% from "components/alert.html" import Alert %}
{% from "components/text_input.html" import TextInput %}
{% from "components/icon.html" import Icon %}

{% block subtitle %}
<h2>Review &amp; Submit</h2>
{% endblock %}


{% block form_action %}
<form method='POST' action="{{ url_for('requests.requests_submit', request_id=request_id) }}" autocomplete="off">
{% endblock %}

  {% block form %}

  <p>Before you can submit your request, please take a moment to review the information entered in the form. You may make changes by clicking the edit link on each section. When all information looks right, go ahead and submit.</p>

  {% if f.errors or not can_submit%}
    {{ Alert('Please complete all sections',
      message="<p>In order to submit your JEDI Cloud request, you'll need to complete all required sections of this form without error. Missing or invalid fields are noted below.</p>",
      level='error'
    ) }}
  {% endif %}


  <h2>
    Details of Use
    <a href="{{ url_for('requests.requests_form_update', screen=1, request_id=request_id) }}" class="icon-link">
      {{ Icon('edit') }}
      <span>Edit this section</span>
    </a>
  </h2>

  <dl>
    <div>
      <dt>DoD Component</dt>
      <dd>{{ data['details_of_use']['dod_component'] or RequiredLabel() }}</dd>
    </div>


    <div>
      <dt>JEDI Usage</dt>
      <dd>{{ data['details_of_use']['jedi_usage'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Number of software systems</dt>
      <dd>{{ data['details_of_use']['num_software_systems'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>JEDI Migration</dt>
      <dd>{{ data['details_of_use']['jedi_migration'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Rationalization of Software Systems</dt>
      <dd>{{ data['details_of_use']['rationalization_software_systems'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Technical Support Team</dt>
      <dd>{{ data['details_of_use']['technical_support_team'] or RequiredLabel() }}</dd>
    </div>


    {% if data['details_of_use']['technical_support_team'] == 'yes' %}
      <div>
        <dt>Organization Providing Assistance</dt>
        <dd>{{ data['details_of_use']['organization_providing_assistance'] or RequiredLabel() }}</dd>
      </div>
    {% endif %}

    <div>
      <dt>Engineering Assessment</dt>
      <dd>{{ data['details_of_use']['engineering_assessment'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Data Transfers</dt>
      <dd>{{ data['details_of_use']['data_transfers'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Expected Completion Date</dt>
      <dd>{{ data['details_of_use']['expected_completion_date'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Cloud Native</dt>
      <dd>{{ data['details_of_use']['cloud_native'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Estimated Monthly Spend</dt>
      <dd>{{ data['details_of_use']['estimated_monthly_spend'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Total Spend</dt>
      <dd>{{ data['details_of_use']['dollar_value'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Number of User Sessions</dt>
      <dd>{{ data['details_of_use']['number_user_sessions'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Average Daily Traffic (Number of Requests)</dt>
      <dd>{{ data['details_of_use']['average_daily_traffic'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Average Daily Traffic (GB)</dt>
      <dd>{{ data['details_of_use']['average_daily_traffic_gb'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Start Date</dt>
      <dd>{{ data['details_of_use']['start_date'] or RequiredLabel() }}</dd>
    </div>
  </dl>


  <h2>
    Information About You
    <a href="{{ url_for('requests.requests_form_update', screen=2, request_id=request_id) }}" class="icon-link">
      {{ Icon('edit') }}
      <span>Edit this section</span>
    </a>
  </h2>

  <dl>
    <div>
      <dt>First Name</dt>
      <dd>{{ data['information_about_you']['fname_request'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Last Name</dt>
      <dd>{{ data['information_about_you']['lname_request'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Email Address</dt>
      <dd>{{ data['information_about_you']['email_request'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Phone Number</dt>
      <dd>{{ data['information_about_you']['phone_number'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Service Branch or Agency</dt>
      <dd>{{ data['information_about_you']['service_branch'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Citizenship</dt>
      <dd>{{ data['information_about_you']['citizenship'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Designation of Person</dt>
      <dd>{{ data['information_about_you']['designation'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>Latest Information Assurance (IA) Training completion date</dt>
      <dd>{{ data['information_about_you']['date_latest_training'] or RequiredLabel() }}</dd>
    </div>
  </dl>


  <h2>
    Primary Point of Contact
    <a href="{{ url_for('requests.requests_form_update', screen=3, request_id=request_id) }}" class="icon-link">
      {{ Icon('edit') }}
      <span>Edit this section</span>
    </a>
  </h2>

  <dl>
    <div>
      <dt>POC First Name</dt>
      <dd>{{ data['primary_poc']['fname_poc'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>POC Last Name</dt>
      <dd>{{ data['primary_poc']['lname_poc'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>POC Email Address</dt>
      <dd>{{ data['primary_poc']['email_poc'] or RequiredLabel() }}</dd>
    </div>

    <div>
      <dt>DOD ID</dt>
      <dd>{{ data['primary_poc']['dodid_poc'] or RequiredLabel() }}</dd>
    </div>
  </dl>



{% endblock %}

{% block next %}

<div class='action-group'>
  <input type='submit' class='usa-button usa-button-primary' value='Submit' {{ "disabled" if not can_submit else "" }} />
</div>

</form>

{% endblock %}
