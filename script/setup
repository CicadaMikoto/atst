#!/bin/bash

# script/setup: Set up application for the first time after cloning, or set it
#               back to the initial first unused state.

# If a command fails, exit the script
set -e

# Ensure we are in the app root directory (not the /script directory)
cd "$(dirname "${0}")/.."

# Install virtualenv
pip install pipenv

if ! type sass > /dev/null; then
  if type gem > /dev/null; then
    echo 'installing a sass compiler...'
    gem install sass
  else
    echo 'Could not install a sass compiler. Please install a version of sass.'
  fi
fi

# Install application dependencies
script/bootstrap

# Symlink uswds fonts into the /static directory
rm -f ./static/fonts
ln -s ../node_modules/uswds/src/fonts ./static/fonts
